{% extends "base.html" %}
{% block content %}
<div class="container" style="margin-top: 30px;">
    <div class="card" style="max-width: 900px; margin: 0 auto; padding: 30px;">
        <h2 style="color: var(--neon-green); margin-bottom: 25px; font-weight: 800; display: flex; align-items: center; gap: 10px;">
            ✏️ Editar Colaborador: {{ user.username }}
        </h2>
        
        <form method="POST">
            <fieldset style="border: none; padding: 0; margin-bottom: 30px;">
                <legend style="font-weight: 700; color: var(--text-muted); text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; margin-bottom: 20px;">Dados Pessoais & Endereço</legend>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px;">Nome Completo</label>
                        <input type="text" name="name" class="form-control-search" value="{{ user.employee.name if user.employee else '' }}" required>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px;">CPF</label>
                        <input type="text" name="cpf" class="form-control-search" value="{{ user.employee.cpf if user.employee else '' }}" required>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px;">CEP</label>
                        <input type="text" name="cep" class="form-control-search" value="{{ user.employee.cep if user.employee else '' }}">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px;">Rua / Logradouro</label>
                        <input type="text" name="address" class="form-control-search" value="{{ user.employee.address if user.employee else '' }}">
                    </div>
                </div>
            </fieldset>

            <hr style="border: 0; border-top: 1px solid var(--border-color); margin-bottom: 30px;">

            <fieldset style="border: none; padding: 0; margin-bottom: 30px;">
                <legend style="font-weight: 700; color: var(--text-muted); text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px; margin-bottom: 20px;">Acesso ao Sistema</legend>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 5px;">Usuário</label>
                        <input type="text" name="username" class="form-control-search" value="{{ user.username }}" required>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px;">Nova Senha</label>
                        <input type="text" name="password" class="form-control-search" placeholder="Deixar vazio para manter">
                        <small style="color: var(--text-muted);">Atual: {{ user.password }}</small>
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 5px;">Nível de Permissão</label>
                        <select name="role" class="form-control-search" style="height: 46px;">
                            <option value="funcionario" {% if user.role == 'funcionario' %}selected{% endif %}>Funcionário</option>
                            <option value="gerente" {% if user.role == 'gerente' %}selected{% endif %}>Gerente</option>
                            <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Administrador</option>
                        </select>
                    </div>
                </div>
            </fieldset>

            <div style="display: flex; gap: 15px; margin-top: 10px;">
                <button type="submit" class="btn-action btn-main" style="flex: 2; justify-content: center;">Atualizar Cadastro</button>
                <a href="{{ url_for('admin.list_users') }}" class="btn-clean" style="flex: 1; text-align: center; justify-content: center;">Cancelar</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}