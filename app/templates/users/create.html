{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="card" style="max-width: 900px; margin: 0 auto;">
        <h2 style="color: var(--primary-color); margin-bottom: 25px; display: flex; align-items: center; gap: 10px;">
            üë§ Cadastro de Colaborador e RH
        </h2>
        
        <form method="POST">
            <fieldset style="border: none; margin-bottom: 20px; padding: 0;">
                <legend style="font-weight: 700; font-size: 0.9rem; color: var(--text-light); text-transform: uppercase; margin-bottom: 15px;">Acesso ao Sistema</legend>
                <div class="form-row">
                    <div class="form-group">
                        <label>Usu√°rio (Login)</label>
                        <input type="text" name="username" class="form-control" placeholder="ex: joao.montenegro" required>
                    </div>
                    <div class="form-group">
                        <label>Senha</label>
                        <input type="password" name="password" class="form-control" placeholder="******" required>
                    </div>
                    <div class="form-group">
                        <label>N√≠vel de Acesso</label>
                        <select name="role" class="form-control">
                            <option value="funcionario">Funcion√°rio</option>
                            <option value="gerente">Gerente</option>
                            <option value="admin">Administrador</option>
                        </select>
                    </div>
                </div>
            </fieldset>

            <hr style="border-top: 1px solid var(--border-light); margin-bottom: 25px;">

            <fieldset style="border: none; padding: 0;">
                <legend style="font-weight: 700; font-size: 0.9rem; color: var(--text-light); text-transform: uppercase; margin-bottom: 15px;">Informa√ß√µes de RH</legend>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo</label>
                        <input type="text" name="name" class="form-control" placeholder="Nome completo do colaborador" required>
                    </div>
                    <div class="form-group">
                        <label>CPF</label>
                        <input type="text" name="cpf" id="cpf" class="form-control" placeholder="000.000.000-00" required>
                    </div>
                </div>

                <div class="form-row" style="grid-template-columns: 2fr 1.5fr 1fr;">
                    <div class="form-group">
                        <label>Cargo / Fun√ß√£o</label>
                        <input type="text" name="position" class="form-control" placeholder="Ex: Balconista">
                    </div>
                    <div class="form-group">
                        <label>Data de Admiss√£o</label>
                        <input type="date" name="admission_date" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Tipo Sangu√≠neo</label>
                        <select name="blood_type" class="form-control">
                            <option value="">N/A</option>
                            <option value="A+">A+</option><option value="A-">A-</option>
                            <option value="B+">B+</option><option value="B-">B-</option>
                            <option value="AB+">AB+</option><option value="AB-">AB-</option>
                            <option value="O+">O+</option><option value="O-">O-</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Contato de Emerg√™ncia (WhatsApp)</label>
                    <input type="text" name="emergency_contact" id="emergency_contact" class="form-control" 
                           placeholder="51999999999" maxlength="11"
                           title="Digite apenas n√∫meros (DDD + N√∫mero)">
                    <small style="color: var(--text-light);">Digite apenas n√∫meros. O sistema formatar√° automaticamente.</small>
                </div>
            </fieldset>

            <div style="margin-top: 30px; display: flex; gap: 15px;">
                <button type="submit" class="btn-success" style="flex: 2;">Finalizar Cadastro de Colaborador</button>
                <a href="{{ url_for('admin.list_users') }}" class="btn-secondary" style="flex: 1; text-align: center; text-decoration: none; padding: 12px; border-radius: 8px; background: #666; color: white;">Cancelar</a>
            </div>
        </form>
    </div>
</div>

<script>
    const telInput = document.getElementById('emergency_contact');
    telInput.addEventListener('input', (e) => {
        let value = e.target.value.replace(/\D/g, ''); // Remove tudo que n√£o for n√∫mero
        e.target.value = value;
    });
</script>
{% endblock %}