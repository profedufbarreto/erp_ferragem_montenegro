{% extends "base.html" %}
{% block content %}
<div class="container" style="margin-top: 30px;">
    <div class="card" style="max-width: 900px; margin: 0 auto; padding: 30px;">
        <h2 style="color: var(--neon-green); margin-bottom: 25px; display: flex; align-items: center; gap: 10px; font-weight: 800;">
            üë§ Cadastro de Colaborador e RH
        </h2>
        
        <form method="POST">
            <fieldset style="border: none; margin-bottom: 30px; padding: 0;">
                <legend style="font-weight: 700; font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 20px; letter-spacing: 1px;">Acesso ao Sistema</legend>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;">
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">Usu√°rio (Login)</label>
                        <input type="text" name="username" class="form-control-search" placeholder="ex: joao.montenegro" required>
                    </div>
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">Senha</label>
                        <input type="text" name="password" class="form-control-search" placeholder="Defina a senha" required>
                    </div>
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">N√≠vel de Acesso</label>
                        <select name="role" class="form-control-search" style="height: 46px;">
                            <option value="funcionario">Funcion√°rio</option>
                            <option value="gerente">Gerente</option>
                            <option value="admin">Administrador</option>
                        </select>
                    </div>
                </div>
            </fieldset>

            <hr style="border: 0; border-top: 1px solid var(--border-color); margin-bottom: 30px;">

            <fieldset style="border: none; padding: 0;">
                <legend style="font-weight: 700; font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: 20px; letter-spacing: 1px;">Informa√ß√µes de RH</legend>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">Nome Completo</label>
                        <input type="text" name="name" class="form-control-search" placeholder="Nome completo do colaborador" required>
                    </div>
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">CPF</label>
                        <input type="text" name="cpf" id="cpf" class="form-control-search" placeholder="000.000.000-00" required>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">Cargo / Fun√ß√£o</label>
                        <input type="text" name="position" class="form-control-search" placeholder="Ex: Balconista">
                    </div>
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">Data de Admiss√£o</label>
                        <input type="date" name="admission_date" class="form-control-search" style="height: 46px;" required>
                    </div>
                    <div class="form-group">
                        <label style="display: block; margin-bottom: 8px;">Tipo Sangu√≠neo</label>
                        <select name="blood_type" class="form-control-search" style="height: 46px;">
                            <option value="">N√£o informado</option>
                            <option value="A+">A+</option><option value="A-">A-</option>
                            <option value="B+">B+</option><option value="B-">B-</option>
                            <option value="AB+">AB+</option><option value="AB-">AB-</option>
                            <option value="O+">O+</option><option value="O-">O-</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label style="display: block; margin-bottom: 8px;">Contato de Emerg√™ncia (WhatsApp)</label>
                    <input type="text" name="emergency_contact" id="emergency_contact" class="form-control-search" 
                           placeholder="51999999999" maxlength="11">
                    <small style="color: var(--text-muted); font-size: 0.75rem;">Digite apenas n√∫meros (DDD + N√∫mero).</small>
                </div>
            </fieldset>

            <div style="margin-top: 40px; display: flex; gap: 15px;">
                <button type="submit" class="btn-action btn-main" style="flex: 2; justify-content: center;">Finalizar Cadastro</button>
                <a href="{{ url_for('admin.list_users') }}" class="btn-clean" style="flex: 1; text-align: center; justify-content: center;">Cancelar</a>
            </div>
        </form>
    </div>
</div>

<script>
    // Limpeza de entrada para n√∫meros apenas no telefone
    document.getElementById('emergency_contact').addEventListener('input', (e) => {
        e.target.value = e.target.value.replace(/\D/g, '');
    });
</script>
{% endblock %}